<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>~/Desktop/ug3_Vision/src/overlay_rays.m.html</title>
<meta name="Generator" content="Vim/7.2">
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
</head>
<body bgcolor="#ffffff" text="#808080"><font face="monospace">
<font color="#0000ff"><b>&nbsp;1 </b></font><font color="#000000">function</font>&nbsp;image = overlay_rays(image, from, to, length, varargin)<br>
<font color="#0000ff"><b>&nbsp;2 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: #ffffff"><font color="#808080"><b>% parse options</b></font></span><br>
<font color="#0000ff"><b>&nbsp;3 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;argc = <font color="#0000ff">size</font>(varargin, <span style="background-color: #ffffff"><font color="#ff6060"><b>2</b></font></span>)<span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>&nbsp;4 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;c = <span style="background-color: #ffffff"><font color="#ff6060"><b>1</b></font></span><span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>&nbsp;5 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">while</font>&nbsp;c <font color="#0000ff">&lt;=</font>&nbsp;argc<br>
<font color="#0000ff"><b>&nbsp;6 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arg = varargin{c}<span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>&nbsp;7 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">if</font>&nbsp;strcmpi(arg, <font color="#ff40ff"><b>'Color'</b></font>)<br>
<font color="#0000ff"><b>&nbsp;8 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">if</font>&nbsp;c <font color="#0000ff">+</font>&nbsp;<span style="background-color: #ffffff"><font color="#ff6060"><b>1</b></font></span>&nbsp;<font color="#0000ff">&gt;</font>&nbsp;argc<br>
<font color="#0000ff"><b>&nbsp;9 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">error</font>(<font color="#ff40ff"><b>'Color option should be followed by an integer tripplet'</b></font>)<span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>10 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">end</font><br>
<font color="#0000ff"><b>11 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;colors = varargin{c <font color="#0000ff">+</font>&nbsp;<span style="background-color: #ffffff"><font color="#ff6060"><b>1</b></font></span>}<span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>12 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c = c <font color="#0000ff">+</font>&nbsp;<span style="background-color: #ffffff"><font color="#ff6060"><b>1</b></font></span><span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>13 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">end</font><br>
<font color="#0000ff"><b>14 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c = c <font color="#0000ff">+</font>&nbsp;<span style="background-color: #ffffff"><font color="#ff6060"><b>1</b></font></span><span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>15 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">end</font><br>
<font color="#0000ff"><b>16 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;<span style="background-color: #ffffff"><font color="#808080"><b>% option defaults</b></font></span><br>
<font color="#0000ff"><b>17 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">if</font>&nbsp;<font color="#0000ff">~</font>exist(<font color="#ff40ff"><b>'colors'</b></font>, <font color="#ff40ff"><b>'var'</b></font>)<br>
<font color="#0000ff"><b>18 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;colors = <font color="#000000">[</font><span style="background-color: #ffffff"><font color="#ff6060"><b>255</b></font></span>&nbsp;<span style="background-color: #ffffff"><font color="#ff6060"><b>255</b></font></span>&nbsp;<span style="background-color: #ffffff"><font color="#ff6060"><b>255</b></font></span><font color="#000000">]</font><span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>19 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">end</font><br>
<font color="#0000ff"><b>20 </b></font><br>
<font color="#0000ff"><b>21 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;num_rays = <font color="#0000ff">size</font>(from, <span style="background-color: #ffffff"><font color="#ff6060"><b>1</b></font></span>)<span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>22 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">if</font>&nbsp;<font color="#0000ff">size</font>(colors, <span style="background-color: #ffffff"><font color="#ff6060"><b>1</b></font></span>) <font color="#0000ff">==</font>&nbsp;<span style="background-color: #ffffff"><font color="#ff6060"><b>1</b></font></span><span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>23 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;colors = repmat(colors, num_rays, <span style="background-color: #ffffff"><font color="#ff6060"><b>1</b></font></span>)<span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>24 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">end</font><br>
<font color="#0000ff"><b>25 </b></font><br>
<font color="#0000ff"><b>26 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">for</font>&nbsp;c = <span style="background-color: #ffffff"><font color="#ff6060"><b>1</b></font></span>&nbsp;: num_rays<br>
<font color="#0000ff"><b>27 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">if</font>&nbsp;from(c,:) <font color="#0000ff">==</font>&nbsp;to(c,:)<br>
<font color="#0000ff"><b>28 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue<span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>29 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">end</font><br>
<font color="#0000ff"><b>30 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x0 = from(c,<span style="background-color: #ffffff"><font color="#ff6060"><b>1</b></font></span>)<span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>31 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y0 = from(c,<span style="background-color: #ffffff"><font color="#ff6060"><b>2</b></font></span>)<span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>32 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x1 = to(c,<span style="background-color: #ffffff"><font color="#ff6060"><b>1</b></font></span>)<span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>33 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y1 = to(c,<span style="background-color: #ffffff"><font color="#ff6060"><b>2</b></font></span>)<span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>34 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dx = x0 <font color="#0000ff">-</font>&nbsp;x1<span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>35 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dy = y0 <font color="#0000ff">-</font>&nbsp;y1<span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>36 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lambda = <font color="#0000ff">min</font>(<font color="#0000ff">sqrt</font>(length <font color="#0000ff">^</font>&nbsp;<span style="background-color: #ffffff"><font color="#ff6060"><b>2</b></font></span>&nbsp;<font color="#0000ff">/</font>&nbsp;(dx <font color="#0000ff">^</font>&nbsp;<span style="background-color: #ffffff"><font color="#ff6060"><b>2</b></font></span>&nbsp;<font color="#0000ff">+</font>&nbsp;dy <font color="#0000ff">^</font>&nbsp;<span style="background-color: #ffffff"><font color="#ff6060"><b>2</b></font></span>)), <font color="#ff6060"><b>...</b></font><br>
<font color="#0000ff"><b>37 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">-</font><font color="#0000ff">sqrt</font>(length <font color="#0000ff">^</font>&nbsp;<span style="background-color: #ffffff"><font color="#ff6060"><b>2</b></font></span>&nbsp;<font color="#0000ff">/</font>&nbsp;(dx <font color="#0000ff">^</font>&nbsp;<span style="background-color: #ffffff"><font color="#ff6060"><b>2</b></font></span>&nbsp;<font color="#0000ff">+</font>&nbsp;dy <font color="#0000ff">^</font>&nbsp;<span style="background-color: #ffffff"><font color="#ff6060"><b>2</b></font></span>)))<span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>38 </b></font><br>
<font color="#0000ff"><b>39 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x = x0 <font color="#0000ff">+</font>&nbsp;lambda <font color="#0000ff">*</font>&nbsp;dx<span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>40 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y = y0 <font color="#0000ff">+</font>&nbsp;lambda <font color="#0000ff">*</font>&nbsp;dy<span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>41 </b></font><br>
<font color="#0000ff"><b>42 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;image = overlay_polygon(image, <font color="#000000">[</font>x0 y0<span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span>&nbsp;x y<font color="#000000">]</font>, colors(c,:))<span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>43 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">end</font><br>
<font color="#0000ff"><b>44 </b></font><font color="#0000ff">end</font><br>
</font></body>
</html>
