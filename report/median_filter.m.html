<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>~/Desktop/ug3_Vision/src/median_filter.m.html</title>
<meta name="Generator" content="Vim/7.2">
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
</head>
<body bgcolor="#ffffff" text="#808080"><font face="monospace">
<font color="#0000ff"><b>&nbsp;1 </b></font><span style="background-color: #ffffff"><font color="#808080"><b>% generates a background image from a set of sample images</b></font></span><br>
<font color="#0000ff"><b>&nbsp;2 </b></font><span style="background-color: #ffffff"><font color="#808080"><b>% subtracting the background from the sample images eases object detection</b></font></span><br>
<font color="#0000ff"><b>&nbsp;3 </b></font><span style="background-color: #ffffff"><font color="#808080"><b>% does not work on these datasets because the blue/cyan robot does not move</b></font></span><br>
<font color="#0000ff"><b>&nbsp;4 </b></font><span style="background-color: #ffffff"><font color="#808080"><b>% for most of the images i.e. will be considered part of the background</b></font></span><br>
<font color="#0000ff"><b>&nbsp;5 </b></font><font color="#000000">function</font>&nbsp;background = median_filter(path, image_type, start_offset, step)<br>
<font color="#0000ff"><b>&nbsp;6 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">if</font>&nbsp;nargin <font color="#0000ff">&lt;</font>&nbsp;<span style="background-color: #ffffff"><font color="#ff6060"><b>2</b></font></span><br>
<font color="#0000ff"><b>&nbsp;7 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;image_type = <font color="#ff40ff"><b>'jpg'</b></font><span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>&nbsp;8 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">end</font><br>
<font color="#0000ff"><b>&nbsp;9 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">if</font>&nbsp;nargin <font color="#0000ff">&lt;</font>&nbsp;<span style="background-color: #ffffff"><font color="#ff6060"><b>3</b></font></span><br>
<font color="#0000ff"><b>10 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_offset = <span style="background-color: #ffffff"><font color="#ff6060"><b>0</b></font></span><span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>11 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">end</font><br>
<font color="#0000ff"><b>12 </b></font><br>
<font color="#0000ff"><b>13 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;dim = <span style="background-color: #ffffff"><font color="#ff6060"><b>2</b></font></span><span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>14 </b></font><br>
<font color="#0000ff"><b>15 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;files = dir(sprintf(<font color="#ff40ff"><b>'%s/*.%s'</b></font>, path, image_type))<span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>16 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;filenames = {files.name}<span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>17 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#000000">[</font><font color="#0000ff">~</font>, num_files<font color="#000000">]</font>&nbsp;= <font color="#0000ff">size</font>(filenames)<span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>18 </b></font><br>
<font color="#0000ff"><b>19 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;reds = cell(num_files <font color="#0000ff">-</font>&nbsp;start_offset, <span style="background-color: #ffffff"><font color="#ff6060"><b>1</b></font></span>)<span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>20 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;greens = cell(num_files <font color="#0000ff">-</font>&nbsp;start_offset, <span style="background-color: #ffffff"><font color="#ff6060"><b>1</b></font></span>)<span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>21 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;blues = cell(num_files <font color="#0000ff">-</font>&nbsp;start_offset, <span style="background-color: #ffffff"><font color="#ff6060"><b>1</b></font></span>)<span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>22 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">for</font>&nbsp;c = <span style="background-color: #ffffff"><font color="#ff6060"><b>1</b></font></span>&nbsp;<font color="#0000ff">+</font>&nbsp;start_offset :step: num_files<br>
<font color="#0000ff"><b>23 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;image = imread(sprintf(<font color="#ff40ff"><b>'%s/%s'</b></font>, path, filenames{c}))<span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>24 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reds{c} = image(:,:,<span style="background-color: #ffffff"><font color="#ff6060"><b>1</b></font></span>)<span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>25 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;greens{c} = image(:,:,<span style="background-color: #ffffff"><font color="#ff6060"><b>2</b></font></span>)<span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>26 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;blues{c} = image(:,:,<span style="background-color: #ffffff"><font color="#ff6060"><b>3</b></font></span>)<span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>27 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0000ff">end</font><br>
<font color="#0000ff"><b>28 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;red_median = median(cat(dim <font color="#0000ff">+</font>&nbsp;<span style="background-color: #ffffff"><font color="#ff6060"><b>1</b></font></span>, reds{:}), dim <font color="#0000ff">+</font>&nbsp;<span style="background-color: #ffffff"><font color="#ff6060"><b>1</b></font></span>)<span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>29 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;green_median = median(cat(dim <font color="#0000ff">+</font>&nbsp;<span style="background-color: #ffffff"><font color="#ff6060"><b>1</b></font></span>, greens{:}), dim <font color="#0000ff">+</font>&nbsp;<span style="background-color: #ffffff"><font color="#ff6060"><b>1</b></font></span>)<span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>30 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;blue_median = median(cat(dim <font color="#0000ff">+</font>&nbsp;<span style="background-color: #ffffff"><font color="#ff6060"><b>1</b></font></span>, blues{:}), dim <font color="#0000ff">+</font>&nbsp;<span style="background-color: #ffffff"><font color="#ff6060"><b>1</b></font></span>)<span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>31 </b></font><br>
<font color="#0000ff"><b>32 </b></font>&nbsp;&nbsp;&nbsp;&nbsp;background = cat(dim <font color="#0000ff">+</font>&nbsp;<span style="background-color: #ffffff"><font color="#ff6060"><b>1</b></font></span>, red_median, green_median, blue_median)<span style="background-color: #ffffff"><font color="#808080"><b>;</b></font></span><br>
<font color="#0000ff"><b>33 </b></font><font color="#0000ff">end</font><br>
</font></body>
</html>
